<html>
    <head>
        <title>?</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <script src="lib/webcomponents-lite.min.js"></script>
        <script src="example_channels.js"></script>
    </head>
    <body>
        <div style="float: right; width: 75%; height: 100%" class="spacegraph" oncontextmenu="return false;">

            <div id="overlay"></div>

            <div id="graph">
                <!-- cytoscape render here -->
            </div>

        </div>
    </body>

    <script>
        //document.addEventListener('DOMContentLoaded', function(){

        //$(document).ready(function() {
        function ready() {
            var ui = UI($('body'));

            var server = Websocket('socket', {
                onOpen: function() {

                    var s = spacegraph(ui, $('#graph'), {
                        start: function() {

                            //server.on('index', this.addChannel);
                            //server.on('chat', this.addChannel);
                            //server.on('source/index', this.addChannel);

                            newPopupMenu(this);

                            s.nodeProcessor.push(new ListToText());
                            s.nodeProcessor.push(new UrlToIFrame());

                            var index = new TagIndex(function(i) {

                                i.activateRoots(1);

                                s.addChannel(i.channel);


                            });
                        }
                    });






                }
            });

        }

        
    </script>
    
    <link rel="import" onload="ready()" href="head.html">
    <link type="text/css" rel="stylesheet" href="spacegraph.dark.css"/>

</html>
