<html>
<head>
    <title>?</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="lib/webcomponents-lite.min.js"></script>
    <script src="example_channels.js"></script>
    <style>
        #graphcanvas {
        float: right; width: 75%; height: 100%;
        }
        #sidebar {
        position: absolute;
        float:left;
        height: 100%;
        width: 25%;
        font-size: 200%;
        /*background-color: black;*/
        opacity: 0.8;
        z-index:6000;
        }
    </style>
</head>

<body>
<div id="sidebar" class="ui inverted menu"></div>
<div id="graphcanvas" class="spacegraph"></div>
</body>

<script>
        //document.addEventListener('DOMContentLoaded', function(){

        //$(document).ready(function() {
        function ready() {


            var server = Websocket('socket', {
                onOpen: function() {

                    var s = spacegraph(ui, $('#graphcanvas'), {
                        start: function() {

                            //server.on('index', this.addChannel);
                            //server.on('chat', this.addChannel);
                            //server.on('source/index', this.addChannel);

                            newPopupMenu(this);

                            s.nodeProcessor.push(new ListToText());
                            s.nodeProcessor.push(new UrlToIFrame());


                        }
                    });

                    window.s = s;

                    var menu = $('#sidebar');
                    menu.append($('<button>Tags</button>').click(function() {
                        s.clear();

                        var index = new TagIndex(function(i) {
                                i.activateRoots(1);
                                s.addChannel(i.channel);
                        });
                        s.layout({name:'random'});
                    }));


                    menu.append($('<button>Video</button>').click(function() {

                        var uuid = ('x' + parseInt(5000 * Math.random()));
                        s.addChannel(c = new Channel( {
                            id: uuid,
                            nodes: [{
                                id: uuid + 'z',
                                width: 64,
                                height: 64,
                                widget: {
                                    html: '<iframe width="560" height="315" src="https://www.youtube.com/embed/vDpGq4QWyUs" frameborder="0" allowfullscreen></iframe>',
                                    style: {  },
                                    scale: 0.8,
                                    minPixels: 8,
                                    pixelScale: 300
                                }
                            },
                            {
                                id: uuid + 'a',
                                width: 64,
                                height: 64,
                                widget: {
                                    html: '<div style="width: 100%; height: 100%;"><div contenteditable="true" class="editable">http://www.thepostignoranceproject.com The queens military industrialized military EARTH RAPING , EARTH KILLING, HUMANITY KILLING colony called the united States of fake Christians; HAS NOW officially admitted to 100% taking over of our last place SOCIAL MEDIA; AS THE GREAT FAKE CHRISTIAN NATION GENOCIDES the earth, as THE united states of USURY BURNS, no one fiddles Fascism on balco, ignorance on balco, neo feudalism on balco colonialism on balco; fake Christians on balco. NOT ME POST IGNORANCE kevin d. blanch 4/7/2015 </div><br/></div>',
                                    style: {  },
                                    scale: 0.9,
                                    minPixels: 8,
                                    pixelScale: 200
                                }
                            }

                            ]
                        }));

                        notify('fuck google you ');
                    }));

                    menu.append($('<button>Wikipedia</button>').click(function() {
                        var c;
                        var h = $('<div style="width:100%">');
                        var tb = $('<input type="text" placeholder="topic"/>').appendTo(h);
                        var bb = $('<button>Wikipedia</button>').appendTo(h);
                        bb.click(function() {
                            var url = 'http://en.m.wikipedia.org/wiki/' + tb.val();
                            h.html('<iframe style="width: 100%; height: 100%" src="' + url + '"></iframe>');
                        });
                        //'<div style="width: 100%; height: 100%; background-color: orange; border: 2px solid black;"><div contenteditable="true" class="editable">WTF</div><br/><button>OK</button></div>'

                        var uuid = ('x' + parseInt(5000 * Math.random()));
                        s.addChannel(c = new Channel( {
                            id: uuid,
                            nodes: [{
                                id: uuid + 'z',
                                width: 64,
                                height: 64,
                                widget: {
                                    html: h,
                                    style: {  },
                                    scale: 0.8,
                                    minPixels: 8,
                                    pixelScale: 300
                                }
                            }]
                        }));
                    }));
                    menu.append($('<button>Widget Test</button>').click(function() {
                        s.clear();
                        s.addChannel(new Channel( {
                            id: 'widgetTest',
                            nodes: [{
                                id: 'e',
                                width: 64,
                                height: 64,
                                widget: {
                                    html: '<div style="width: 100%; height: 100%; background-color: orange; border: 2px solid black;"><div contenteditable="true" class="editable">WTF</div><br/><button>OK</button></div>',
                                    style: {  },
                                    scale: 0.9,
                                    minPixels: 8,
                                }
                            }]
                        }));
                        s.layout({name:'random'});
                    }));
                    menu.append($('<button>Types Demo</button>').click(function() {
                        s.clear();
                        s.addChannel(new Channel( newExampleChannel1() ));
                    }));

                    menu.append('<hr/>');

                    menu.append($('<button>CLEAR</button>').click(function() {
                        s.clear();
                    }));

                    menu.append('<hr/>');

                    menu.append('<i class="random icon"></i>');
                    menu.append($('<a href="#">F</a>').click(function() {
                        s.setLayout({
                            name: 'cose',

                            refresh: 1, //4,
                            iterations: 10,
                            randomize: false


                        });
                    }));
                    menu.append($('<a href="#">G</a>').click(function() {
                        s.setLayout({
                            name: 'grid'
                        });
                    }));
                    menu.append($('<a href="#">C</a>').click(function() {
                        s.setLayout({
                            name: 'concentric'
                        });
                    }));
                    menu.append($('<a href="#">T</a>').click(function() {
                        s.setLayout({
                            name: 'breadthfirst'
                        });
                    }));
                    menu.append($('<a href="#">t</a>').click(function() {
                        s.setLayout({
                            name: 'breadthfirst',
                            directed: true,
                            boundingBox: { x1: 0, y1: 0, x2: 100, y2: 800 } //vertical
                        });
                    }));
                    menu.append($('<a href="#">S</a>').click(function() {
                        s.setLayout({
                            name: 'breadthfirst',
                            circle: true
                        });
                    }));
                    menu.append($('<a href="#">R</a>').click(function() {
                        s.setLayout({
                            name: 'random'
                        });
                    }));

                    var ui = UI(menu, s);





                }
            });

        }

        




</script>

<link rel="import" onload="ready()" href="head.html">
<link type="text/css" rel="stylesheet" href="spacegraph.dark.css"/>

</html>
