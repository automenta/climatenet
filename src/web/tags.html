<html>
<head>
    <title>?</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="lib/webcomponents-lite.min.js"></script>
    <script src="example_channels.js"></script>
    <style>
        #graphcanvas {
        float: right; width: 75%; height: 100%;
        }
        #sidebar {
        position: absolute;
        float:left;
        height: 100%;
        width: 25.5%;
        font-size: 200%;
        background-color: black;
        opacity: 0.8;
        z-index:6000;
        }
    </style>
</head>

<body>
<div id="sidebar"></div>
<div id="graphcanvas" class="spacegraph"></div>
</body>

<script>
        //document.addEventListener('DOMContentLoaded', function(){

        //$(document).ready(function() {
        function ready() {


            var server = Websocket('socket', {
                onOpen: function() {

                    var s = spacegraph(ui, $('#graphcanvas'), {
                        start: function() {

                            //server.on('index', this.addChannel);
                            //server.on('chat', this.addChannel);
                            //server.on('source/index', this.addChannel);

                            newPopupMenu(this);

                            s.nodeProcessor.push(new ListToText());
                            s.nodeProcessor.push(new UrlToIFrame());


                        }
                    });

                    window.s = s;

                    $('#sidebar').append($('<button>Tags</button>').click(function() {
                        s.clear();

                        var index = new TagIndex(function(i) {
                                i.activateRoots(1);
                                s.addChannel(i.channel);
                        });
                    }));
                    $('#sidebar').append($('<button>Widget Test</button>').click(function() {
                        s.clear();
                        s.addChannel(new Channel( {
                            id: 'widgetTest',
                            nodes: [{
                                id: 'e',
                                width: 64,
                                height: 64,
                                widget: {
                                    html: '<div style="width: 100%; height: 100%; background-color: orange; border: 2px solid black;"><div contenteditable="true" class="editable">WTF</div><br/><button>OK</button></div>',
                                    style: {  },
                                    scale: 0.9,
                                    minPixels: 8,
                                }
                            }]

                        }));
                    }));
                    $('#sidebar').append($('<button>Types Demo</button>').click(function() {
                        s.clear();
                        s.addChannel(new Channel( newExampleChannel1() ));
                    }));
                    $('#sidebar').append($('<a href="#">F</a>').click(function() {
                        s.setLayout({
                            name: 'cose',

                            refresh: 1, //4,
                            iterations: 10,
                            randomize: false


                        });
                    }));
                    $('#sidebar').append($('<a href="#">G</a>').click(function() {
                        s.setLayout({
                            name: 'grid'
                        });
                    }));
                    $('#sidebar').append($('<a href="#">C</a>').click(function() {
                        s.setLayout({
                            name: 'concentric'
                        });
                    }));
                    $('#sidebar').append($('<a href="#">T</a>').click(function() {
                        s.setLayout({
                            name: 'breadthfirst'
                        });
                    }));
                    $('#sidebar').append($('<a href="#">t</a>').click(function() {
                        s.setLayout({
                            name: 'breadthfirst',
                            directed: true,
                            boundingBox: { x1: 0, y1: 0, x2: 100, y2: 800 } //vertical
                        });
                    }));
                    $('#sidebar').append($('<a href="#">S</a>').click(function() {
                        s.setLayout({
                            name: 'breadthfirst',
                            circle: true
                        });
                    }));
                    $('#sidebar').append($('<a href="#">R</a>').click(function() {
                        s.setLayout({
                            name: 'random'
                        });
                    }));

                    var ui = UI($('#sidebar'), s);





                }
            });

        }

        




</script>

<link rel="import" onload="ready()" href="head.html">
<link type="text/css" rel="stylesheet" href="spacegraph.dark.css"/>

</html>
